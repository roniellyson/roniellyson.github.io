<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        font: bold 11pt Arial;
        background-color: rgba(36, 72, 168, 0.884);
        text-align: left;
        display: grid;
      }
    </style>
  </head>
  <body>
    <form action="POST" name="primeiro_formulario" id="formulario">
      <fieldset>
        <legend>Cadastro de aluno</legend>

        <div>
          <label for="id_nome"
            >Nome:
            <input
              type="text"
              name="nome"
              id="id_nome"
              required=""
              placeholder="Informe seu nome"
              minlength="6"
              maxlength="50"
            />
          </label>

          <br />
        </div>

        <div>
          <label for="id_email">
            Email institucional:
            <input
              type="email"
              name="email"
              id="id_email"
              required=""
              placeholder="Informe seu e-mail"
              size="60"
              pattern="^[\w\.-]+@aluno\.ce\.gov\.br$"
              title="Somente emails @aluno.ce.gov.br serão aceitos"
            />
          </label>
        </div>
        <div>
          <label for="lista_cor_pele"
            >Cor:
            <select name="cor_pele" id="lista_cor_pele">
              <option value="" disabled="" selected="">
                Selecione sua cor
              </option>
              <option value="preto">Preto</option>
              <option value="pardo">Pardo</option>
              <option value="branco">Branco</option>
              <option value="indigena">Indígena</option></select
            ><br />
          </label>
        </div>
        <div>
          <label for="id_telefone"
            >Telefone:
            <input
              type="text"
              id="id_telefone"
              name="telefone"
              inputmode="numeric"
              pattern="\(\d{2}\) \d{5}-\d{4}"
              title="Coloque no mínimo 4 caracteres e no máximo 15 caracteres"
            />
          </label>
        </div>
        <div>
          <label for="id_senha">
            Senha:
            <input name="senha" type="password" autocomplete="new-password" />
          </label>
        </div>

        <div>
          <button type="submit">Enviar</button>
        </div>
      </fieldset>
    </form>

    <script type="module">
      // Importação
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-analytics.js";
      import {
        getDatabase,
        ref,
        push,
      } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-database.js";

      const firebaseConfig = {
        apiKey: "AIzaSyBD_3WzPZBm83lUW0pMLt48IdLpkovC1a8",
        authDomain: "teste-484d9.firebaseapp.com",
        projectId: "teste-484d9",
        storageBucket: "teste-484d9.appspot.com",
        messagingSenderId: "631993282858",
        appId: "1:631993282858:web:708a7715ffc0fda626ee53",
        measurementId: "G-ZQKVK9DSWK",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      const database = getDatabase();

      // Capture o formulário
      let form = document.getElementById("formulario");
      form.addEventListener("submit", (e) => {
        e.preventDefault(); // Evita o envio padrão do formulário

        // Capture os valores do formulário
        const nome = form["nome"].value;
        const email = form["email"].value;
        const cor_pele = form["cor_pele"].value;
        const telefone = form["telefone"].value;
        const senha = form["senha"].value;

        // Enviar os dados para o Firebase
        const usersRef = ref(database, "users");
        push(usersRef, {
          nome: nome,
          email: email,
          cor_pele: cor_pele,
          telefone: telefone,
          senha: senha,
        })
          .then(() => {
            console.log("Dados enviados com sucesso!");
            // Faça qualquer ação adicional aqui, como redirecionar o usuário ou exibir uma mensagem de sucesso.
          })
          .catch((error) => {
            console.error("Erro ao enviar dados:", error);
          });
      });
    </script>
  </body>
</html>
